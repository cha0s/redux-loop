
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Action Queue Â· Redux-Loop</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../build/gitbook.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../api-docs/" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../tutorial/">
            
                <a href="../tutorial/">
            
                    
                    Getting started
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../tutorial/Tutorial.html">
            
                <a href="../tutorial/Tutorial.html">
            
                    
                    Tutorial
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../tutorial/Testing.html">
            
                <a href="../tutorial/Testing.html">
            
                    
                    Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../tutorial/Migrating.html">
            
                <a href="../tutorial/Migrating.html">
            
                    
                    Migrating to Redux Loop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../tutorial/AdvancedTopics.html">
            
                <a href="../tutorial/AdvancedTopics.html">
            
                    
                    Advanced topics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="./">
            
                <a href="./">
            
                    
                    Recipes
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.3.1" data-path="ActionQueue.html">
            
                <a href="ActionQueue.html">
            
                    
                    Action Queue
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../api-docs/">
            
                <a href="../api-docs/">
            
                    
                    API Docs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../api-docs/install.html">
            
                <a href="../api-docs/install.html">
            
                    
                    install
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../api-docs/loop.html">
            
                <a href="../api-docs/loop.html">
            
                    
                    loop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../api-docs/liftState.html">
            
                <a href="../api-docs/liftState.html">
            
                    
                    liftState
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../api-docs/getModel.html">
            
                <a href="../api-docs/getModel.html">
            
                    
                    getModel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../api-docs/getCmd.html">
            
                <a href="../api-docs/getCmd.html">
            
                    
                    getCmd
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../api-docs/isLoop.html">
            
                <a href="../api-docs/isLoop.html">
            
                    
                    isLoop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../api-docs/cmds.html">
            
                <a href="../api-docs/cmds.html">
            
                    
                    Cmds
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.1" data-path="../api-docs/cmds.html">
            
                <a href="../api-docs/cmds.html#cmdactionactiontodispatch">
            
                    
                    Cmd.action
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.2" data-path="../api-docs/cmds.html">
            
                <a href="../api-docs/cmds.html#cmdrunfunc-options">
            
                    
                    Cmd.run
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.3" data-path="../api-docs/cmds.html">
            
                <a href="../api-docs/cmds.html#cmdlistcmds-options">
            
                    
                    Cmd.list
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.4" data-path="../api-docs/cmds.html">
            
                <a href="../api-docs/cmds.html#cmdmapcmd-higherorderactioncreator-additionalargs">
            
                    
                    Cmd.map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.5" data-path="../api-docs/cmds.html">
            
                <a href="../api-docs/cmds.html#cmdnone">
            
                    
                    Cmd.none
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="../api-docs/cmds.html">
            
                <a href="../api-docs/cmds.html#cmdgetstate">
            
                    
                    Cmd.getState
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="../api-docs/cmds.html">
            
                <a href="../api-docs/cmds.html#cmddispatch">
            
                    
                    Cmd.dispatch
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.10" data-path="../api-docs/combine-reducers.html">
            
                <a href="../api-docs/combine-reducers.html">
            
                    
                    combineReducers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.11" data-path="../api-docs/reduce-reducers.html">
            
                <a href="../api-docs/reduce-reducers.html">
            
                    
                    reduceReducers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.12" data-path="../api-docs/merge-child-reducers.html">
            
                <a href="../api-docs/merge-child-reducers.html">
            
                    
                    mergeChildReducers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Action Queue</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="action-queue">Action Queue</h1>
<h2 id="building-a-simple-action-queue">Building a simple action queue</h2>
<p>Sometimes it might be desirable to dynamically add commands to a queue and
handle each one in succession. Let&apos;s say for example we want to be able to
drag tasks on a taskboard. Whenever a drag movement ends, we have to send the
new position of the task to the server as well, so that it persists on a page reload.
If our request fails we want to roll back and put the task at its source position.
But what happens if we drag multiple tasks in quick succession?
Because of their asynchronous nature requests could resolve in any order.
Meaning we might produce inconsistent states.
There would be no way for us to control in which order our requests resolve,
and because each request is triggered by its own action we cannot make use of
<code>Cmd.list(cmds, { sequence: true })</code>.
Instead we need to build a queue ourselves which luckily is quite easy to do with redux-loop.
The example below shows, how you could model your initial state as well as your <em>QueueReducer</em>.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  queue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  error<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">//other fields</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Reducer</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> initialState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&apos;ITEM_DRAGGED&apos;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> queue <span class="token punctuation">}</span> <span class="token operator">=</span> state<span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">;</span>

      <span class="token keyword">if</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//something is already running so just add a request to the queue</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          <span class="token operator">...</span>state<span class="token punctuation">,</span>
          queue<span class="token punctuation">:</span> queue<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//add new request to back of queue</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">//nothing is running so just add the new request to the front of the queue and run it</span>
      <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        queue<span class="token punctuation">:</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token function">loop</span><span class="token punctuation">(</span>newState<span class="token punctuation">,</span> Cmd<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>doRequest<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        args<span class="token punctuation">:</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">,</span>
        successActionCreator<span class="token punctuation">:</span> requestSuccessAction<span class="token punctuation">,</span>
        failActionCreator<span class="token punctuation">:</span> requestFailAction
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">case</span> <span class="token string">&apos;DRAG_REQUEST_SUCCESS&apos;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        queue<span class="token punctuation">:</span> state<span class="token punctuation">.</span>queue<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//remove old request from front of queue</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>newState<span class="token punctuation">.</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//no more requests in the queue</span>
        <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token comment">//start the next request</span>
      <span class="token keyword">return</span> <span class="token function">loop</span><span class="token punctuation">(</span>newState<span class="token punctuation">,</span> Cmd<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>doRequest<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        args<span class="token punctuation">:</span> <span class="token punctuation">[</span>newState<span class="token punctuation">.</span>queue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        successActionCreator<span class="token punctuation">:</span> requestSuccessAction<span class="token punctuation">,</span>
        failActionCreator<span class="token punctuation">:</span> requestFailAction
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">case</span> <span class="token string">&apos;DRAG_REQUEST_FAILURE&apos;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        queue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//clear queue on failure</span>
        error<span class="token punctuation">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="handling-different-kinds-of-actions">Handling different kinds of actions</h2>
<p>Sometimes you might want to queue different kinds of actions.
To achieve this, we could build a <code>QueueReducer</code> that listens for specific properties
instead of an <code>action.type</code>:</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">function</span> <span class="token function">QueueReducer</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>queuedAction<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// add to queue and potentially dispatch the action with Cmd.action if the</span>
    <span class="token comment">// queue was empty before</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//something is already running so just add the action to the queue</span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>action<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// nothing is running so just add the new action to the front of the queue and run it</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token punctuation">[</span>action<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">loop</span><span class="token punctuation">(</span>newState<span class="token punctuation">,</span> Cmd<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>queueSuccess<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// remove action from queue (FIFO) and potentially continue</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> state<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>newState<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">// no more requests in the queue</span>
      <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// dispatch next axtion</span>
    <span class="token keyword">return</span> <span class="token function">loop</span><span class="token punctuation">(</span>newState<span class="token punctuation">,</span> Cmd<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>queueFail<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">DraggingReducer</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">&apos;ITEM_DRAGGED&apos;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// update the state according to the dragging changes</span>
      <span class="token comment">// (the function below is just an example)</span>
      <span class="token keyword">return</span> <span class="token function">updateDraggedState</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">case</span> <span class="token string">&apos;DRAG_REQUEST&apos;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> id <span class="token operator">=</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token function">loop</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> Cmd<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>doRequest<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        args<span class="token punctuation">:</span> <span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token function-variable function">successActionCreator</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dragRequestSuccess</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function-variable function">failActionCreator</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dragRequestFailure</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token comment">// old state to roll back on failure</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">case</span> <span class="token string">&apos;DRAG_REQUEST_FAILURE&apos;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> oldState <span class="token operator">=</span> action<span class="token punctuation">.</span>payload<span class="token punctuation">;</span>
      <span class="token keyword">return</span> oldState
    <span class="token punctuation">}</span>

    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Now if we want to add a request action to our queue whenever the user drags
a card on our task board, we will dispatch a combined action of the event that
actually occured and the <code>queuedAction</code> we want to add to our queue. To make this
a bit easier we create an <code>attachQueuedAction</code> function which we can use inside
our action creators:</p>
<pre class="language-"><code class="lang-js"><span class="token comment">// Helper actionCreators</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">attachQueuedAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">action<span class="token punctuation">,</span> queuedAction</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>action<span class="token punctuation">,</span>
    queuedAction <span class="token comment">// this is the property our QueueReducer is looking for</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">attachQueueSuccess</span> <span class="token operator">=</span> <span class="token parameter">action</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>action<span class="token punctuation">,</span>
    queueSuccess<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// this is the property our QueueReducer is looking for</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">attachQueueFail</span> <span class="token operator">=</span> <span class="token parameter">action</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>action<span class="token punctuation">,</span>
    queueFail<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// this is the property our QueueReducer is looking for</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Actual actionCreators</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">makeDragRequest</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">&apos;DRAG_REQUEST&apos;</span><span class="token punctuation">,</span>
  payload<span class="token punctuation">:</span> id
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">itemDragged</span> <span class="token operator">=</span> <span class="token parameter">id</span> <span class="token operator">=&gt;</span> <span class="token function">attachQueuedAction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">&apos;ITEM_DRAGGED&apos;</span><span class="token punctuation">,</span>
  payload<span class="token punctuation">:</span> id
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token function">makeDragRequest</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">dragRequestSuccess</span> <span class="token operator">=</span> <span class="token parameter">id</span> <span class="token operator">=&gt;</span> <span class="token function">attachQueueSuccess</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">&apos;DRAG_REQUEST_SUCCESS&apos;</span><span class="token punctuation">,</span>
  payload<span class="token punctuation">:</span> id
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">dragRequestFailure</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">oldState</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">attachQueueFail</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">&apos;DRAG_REQUEST_FAILURE&apos;</span><span class="token punctuation">,</span>
  payload<span class="token punctuation">:</span> oldState
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Recipes">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../api-docs/" class="navigation navigation-next " aria-label="Next page: API Docs">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Action Queue","level":"1.3.1","depth":2,"next":{"title":"API Docs","level":"1.4","depth":1,"path":"docs/api-docs/README.md","ref":"docs/api-docs/README.md","articles":[{"title":"install","level":"1.4.1","depth":2,"path":"docs/api-docs/install.md","ref":"docs/api-docs/install.md","articles":[]},{"title":"loop","level":"1.4.2","depth":2,"path":"docs/api-docs/loop.md","ref":"docs/api-docs/loop.md","articles":[]},{"title":"liftState","level":"1.4.3","depth":2,"path":"docs/api-docs/liftState.md","ref":"docs/api-docs/liftState.md","articles":[]},{"title":"getModel","level":"1.4.4","depth":2,"path":"docs/api-docs/getModel.md","ref":"docs/api-docs/getModel.md","articles":[]},{"title":"getCmd","level":"1.4.5","depth":2,"path":"docs/api-docs/getCmd.md","ref":"docs/api-docs/getCmd.md","articles":[]},{"title":"isLoop","level":"1.4.6","depth":2,"path":"docs/api-docs/isLoop.md","ref":"docs/api-docs/isLoop.md","articles":[]},{"title":"Cmds","level":"1.4.7","depth":2,"path":"docs/api-docs/cmds.md","ref":"docs/api-docs/cmds.md","articles":[{"title":"Cmd.action","level":"1.4.7.1","depth":3,"anchor":"#cmdactionactiontodispatch","path":"docs/api-docs/cmds.md","ref":"docs/api-docs/cmds.md#cmdactionactiontodispatch","articles":[]},{"title":"Cmd.run","level":"1.4.7.2","depth":3,"anchor":"#cmdrunfunc-options","path":"docs/api-docs/cmds.md","ref":"docs/api-docs/cmds.md#cmdrunfunc-options","articles":[]},{"title":"Cmd.list","level":"1.4.7.3","depth":3,"anchor":"#cmdlistcmds-options","path":"docs/api-docs/cmds.md","ref":"docs/api-docs/cmds.md#cmdlistcmds-options","articles":[]},{"title":"Cmd.map","level":"1.4.7.4","depth":3,"anchor":"#cmdmapcmd-higherorderactioncreator-additionalargs","path":"docs/api-docs/cmds.md","ref":"docs/api-docs/cmds.md#cmdmapcmd-higherorderactioncreator-additionalargs","articles":[]},{"title":"Cmd.none","level":"1.4.7.5","depth":3,"anchor":"#cmdnone","path":"docs/api-docs/cmds.md","ref":"docs/api-docs/cmds.md#cmdnone","articles":[]}]},{"title":"Cmd.getState","level":"1.4.8","depth":2,"anchor":"#cmdgetstate","path":"docs/api-docs/cmds.md","ref":"docs/api-docs/cmds.md#cmdgetstate","articles":[]},{"title":"Cmd.dispatch","level":"1.4.9","depth":2,"anchor":"#cmddispatch","path":"docs/api-docs/cmds.md","ref":"docs/api-docs/cmds.md#cmddispatch","articles":[]},{"title":"combineReducers","level":"1.4.10","depth":2,"path":"docs/api-docs/combine-reducers.md","ref":"docs/api-docs/combine-reducers.md","articles":[]},{"title":"reduceReducers","level":"1.4.11","depth":2,"path":"docs/api-docs/reduce-reducers.md","ref":"docs/api-docs/reduce-reducers.md","articles":[]},{"title":"mergeChildReducers","level":"1.4.12","depth":2,"path":"docs/api-docs/merge-child-reducers.md","ref":"docs/api-docs/merge-child-reducers.md","articles":[]}]},"previous":{"title":"Recipes","level":"1.3","depth":1,"path":"docs/recipes/README.md","ref":"docs/recipes/README.md","articles":[{"title":"Action Queue","level":"1.3.1","depth":2,"path":"docs/recipes/ActionQueue.md","ref":"docs/recipes/ActionQueue.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["edit-link","prism","-highlight","github","anchorjs"],"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/redux-loop/redux-loop/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/redux-loop/redux-loop/tree/master"},"theme-default":{"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Redux-Loop","gitbook":"3.2.2"},"file":{"path":"docs/recipes/ActionQueue.md","mtime":"2018-07-30T09:37:13.023Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2019-11-14T20:34:03.585Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchorjs/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

